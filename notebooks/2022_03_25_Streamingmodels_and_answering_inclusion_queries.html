
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Streaming Models and Answering Inclusion Queries &#8212; CS328-2022 Notes</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Bloom Filters" href="2022_04_10_DistinctCount_BloomFilters.html" />
    <link rel="prev" title="Low rank approximation in Mixture Models and Recommendation systems" href="2022_03_24_Low_rank_approximation_Mixture_Models%20_and_Recommendation%20systems.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">CS328-2022 Notes</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Course Description
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Logistics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="CONTRIBUTING.html">
   Contributing to CS328 Notes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="deadlines.html">
   Deadlines
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Foundations
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="2022_01_03_data_representations.html">
   Data Representations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_01_03_data_representations_notebook.html">
   [CODE] üßë‚ÄçüíªData Representations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_01_03_distance_function.html">
   Distance Function
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_01_06_object_representations_notebook.html">
   Object Representations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_01_10_central_limit_theorem_notebook.html">
   Central Limit Theorem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_01_11_markov_chebyshev_inequalities.html">
   Markov and Chebyshev Inequalities
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_01_13_chernoff_bound.html">
   Chernoff Bound
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_01_13_chernoff_bound_tails.html">
   Plot of chernoff bound
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Clustering and low-rank approximations
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="2022_01_17_Clustering.html">
   Clustering
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_01_24_K-means.html">
   K-means
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_01_25_K-means%2B%2B.html">
   Lloyd‚Äôs algorithm, convergence?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_01_27_Hierarchial_Clustering.html">
   Why does k-means++ work?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_01_31_HierarchialClustering_LinkagebasedClusturing.html">
   Hierarchical Clustering
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_02_01_DensestSubgraph_Maxflowalgorithm.html">
   Densest Subgraphs
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_02_03_Greedy_algorithm_for_Densest_subgraphs.html">
   Densest Subgraph
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_02_10_Expansion_Conductance_Graphs_Sparset_Cut.html">
   Expansion and Conductance of a Graph
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_02_14_GraphLaplacian.html">
   Graph Laplacian and its Eigenvalues
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_02_15_Relation_between_second_eigenvalue_of_Laplacian_and_Spectral_Clustering.html">
   Relation between second eigenvalue of Laplacian and Spectral Clustering
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_02_17_Mixture_Models.html">
   Mixture Models
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_02_21_Chi_Squared_Distribution%2C_Gaussian_Annulus_Theorem%2C_Distance_between_points_sampled_from_a_distribution.html">
   Gaussian Annulus Theorem
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_03_14_singular_value_decomposition.html">
   Singular Valued Decomposition (SVD)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_03_15_geometric_svd.html">
   Applications of SVD
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_03_17_SVD_in_Mixture_Models.html">
   SVD in Gaussian Mixture Model
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_03_22_Frobenius_Norm_and_Low_Rank_Approaximation.html">
   Frobenius Norm and Low Rank Approaximation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_03_24_Low_rank_approximation_Mixture_Models%20_and_Recommendation%20systems.html">
   Low rank approximation in Mixture Models and Recommendation systems
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Dealing with massive data
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Streaming Models and Answering Inclusion Queries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_04_10_DistinctCount_BloomFilters.html">
   Bloom Filters
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_03_31_Linear_Counting.html">
   Linear Counting
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_04_04_Flajolet_Martin_Algorithm.html">
   Flajolet-Martin Sketch
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Selected topics from NPTEL-Scalable Data Science Course
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="2022_04_07_Near_Neighbors.html">
   Finding Near Neighbors
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_04_08_Locality_Sensitive_Hashing.html">
   Locality Sensitive Hashing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_04_07_Building_LSH_Tables.html">
   Building LSH Table
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2022_04_07_Randomized_Numerical_Linear_Algebra_Random_Projection.html">
   Randomized Numerical Linear Algebra: Random Projection
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/notebooks/2022_03_25_Streamingmodels_and_answering_inclusion_queries.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/cs328-2022/CS328-Notes"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/cs328-2022/CS328-Notes/issues/new?title=Issue%20on%20page%20%2Fnotebooks/2022_03_25_Streamingmodels_and_answering_inclusion_queries.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/cs328-2022/CS328-Notes/edit/main/CS328-Notes/notebooks/2022_03_25_Streamingmodels_and_answering_inclusion_queries.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/cs328-2022/CS328-Notes/main?urlpath=lab/tree/CS328-Notes/notebooks/2022_03_25_Streamingmodels_and_answering_inclusion_queries.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/cs328-2022/CS328-Notes/blob/main/CS328-Notes/notebooks/2022_03_25_Streamingmodels_and_answering_inclusion_queries.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sampling-data-in-a-stream">
   Sampling Data in a Stream
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reservoir-sampling">
   Reservoir Sampling
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hashing">
   Hashing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hash-family">
   Hash Family
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chaining">
   Chaining
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prime-multiplicative-hashing">
   Prime Multiplicative Hashing
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Streaming Models and Answering Inclusion Queries</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sampling-data-in-a-stream">
   Sampling Data in a Stream
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reservoir-sampling">
   Reservoir Sampling
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hashing">
   Hashing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hash-family">
   Hash Family
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#chaining">
   Chaining
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#prime-multiplicative-hashing">
   Prime Multiplicative Hashing
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="streaming-models-and-answering-inclusion-queries">
<h1>Streaming Models and Answering Inclusion Queries<a class="headerlink" href="#streaming-models-and-answering-inclusion-queries" title="Permalink to this headline">¬∂</a></h1>
<p>Stream sampling is a process of collecting a representative sample of the elements of a data stream.The sample is usually much smaller than the entire stream, but can be designed to retain many important characteristics of the stream, and can be used to estimate many important aggregates on the stream. <br>
<br>In this section, we are going to learn about memory efficent computing when the space is at crunch. We are assuming two important assumptions in this section.</p>
<ol class="simple">
<li><p>data arrives in a stream or streams and if it is not processed or stored, then it is lost forever.</p></li>
<li><p>data arrives so rapidly that it is not feasible to store it and then interact with it at the time of our choosing.</p></li>
</ol>
<div class="admonition-examples-of-the-streaming-data admonition">
<p class="admonition-title">Examples of the streaming data</p>
<ul class="simple">
<li><p>Sensor data: Imagine a temperature sensor above the ocean, sending information about the surface temperature to the base station at every hour.</p></li>
<li><p>Image data: Sateliites often send infromation to the earth which consists of terabytes of the information.</p></li>
<li><p>Internet and Web Traffic</p></li>
</ul>
</div>
<div class="proof remark admonition" id="remark-0">
<p class="admonition-title"><span>Remark </span></p>
<div class="remark-content section" id="proof-content">
<ul class="simple">
<li><p>Streams often deliver elements very rapidly. We must process them quickly otherwise we may lose the opportunity to process them at all. Thus it is important that the streaming algortihm is executed in the main memory with rare accessing the secondary memory.</p></li>
<li><p>Even if the stream requires only small portion of main memory for the computation, the requirements of all streams together can exceed the main memory.</p></li>
</ul>
</div>
</div><div class="section" id="sampling-data-in-a-stream">
<h2>Sampling Data in a Stream<a class="headerlink" href="#sampling-data-in-a-stream" title="Permalink to this headline">¬∂</a></h2>
<p>Suppose we have <span class="math notranslate nohighlight">\(a_1\)</span>, <span class="math notranslate nohighlight">\(a_2\)</span>, <span class="math notranslate nohighlight">\(a_3\)</span>, ‚Ä¶‚Ä¶ <span class="math notranslate nohighlight">\(a_n\)</span> distinct items in a stream belongs to some universe U. Our goal is to sample a set S from the stream such that <span class="math notranslate nohighlight">\(|\)</span>S<span class="math notranslate nohighlight">\(|\)</span> <span class="math notranslate nohighlight">\(=\)</span> <span class="math notranslate nohighlight">\(k\)</span> and p[x <span class="math notranslate nohighlight">\(\in\)</span> S] = <span class="math notranslate nohighlight">\(\frac kn\)</span> <span class="math notranslate nohighlight">\(\forall\)</span><span class="math notranslate nohighlight">\(x\)</span> in the stream.</p>
<p>There are two cases possible while sampling from the stream based on the length of the stream.</p>
<p>Case1 : We know the length of stream is known and finite.</p>
<ul class="simple">
<li><p>Can choose k random positions out of n and use the entries in those positions</p></li>
<li><p>The samples are obtained only after reading through the entire stream</p></li>
</ul>
<p>Case2 : We don‚Äôt know the length of the stream i.e; n is unknown or n is infinite.</p>
<p>We can use Reservoir Sampling</p>
</div>
<div class="section" id="reservoir-sampling">
<h2>Reservoir Sampling<a class="headerlink" href="#reservoir-sampling" title="Permalink to this headline">¬∂</a></h2>
<p>Assume we are sampling only single item then k=1.
Suppose we have <span class="math notranslate nohighlight">\(a_1\)</span>, <span class="math notranslate nohighlight">\(a_2\)</span>, <span class="math notranslate nohighlight">\(a_3\)</span>, ‚Ä¶<span class="math notranslate nohighlight">\(a_i\)</span>‚Ä¶ <span class="math notranslate nohighlight">\(a_n\)</span> distinct items in a stream belongs to some universe U where we don‚Äôt know n in advance. then</p>
<div class="math notranslate nohighlight">
\[ 
pr[a_i \ is \ chosen] = \frac 1n 
\]</div>
<p>Since k=1 we will have a one memory cell to store one sample from the data. Let that memeory cell be s.</p>
<p>Now the probability of <span class="math notranslate nohighlight">\(a_i\)</span> replacing the element previously in the memory cell is <span class="math notranslate nohighlight">\(\frac 1i\)</span> and move on is <span class="math notranslate nohighlight">\(1 - \frac1i\)</span>.</p>
<p>Now let us suppose the ith item is in the final stored in the memory cell.</p>
<div class="math notranslate nohighlight">
\[pr[s = a_i] = \frac 1i \times(1-\frac1{i+1})\times(1-\frac 1{i+2})\times.......\times(1-\frac 1n)\]</div>
<p>since ith element must be chosen and (i+1)th, (i+2)th‚Ä¶nth elements must move on.</p>
<p>Hence,</p>
<div class="math notranslate nohighlight">
\[pr[s = a_i] = \frac 1i \times(\frac{i}{i+1})\times(\frac{i+1}{i+2})\times ....... \times\frac{n-1}n)  pr[s = a_i] = \frac 1n\]</div>
<p>With this information, now let us solve for the case any k.</p>
<p>Suppose if we want to make sampling k items with replacement of items then do k parallel independent reservoir sampling for single items.
Suppose if we want to make sampling k items without replacement of items.
This time we are going to have k memory cells.
Follow the below algortihm:</p>
<p>for the first k items in the stream simply assign them to the k memory cells.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">&gt;</span><span class="n">k</span><span class="p">):</span>

       <span class="n">j</span> <span class="o">=</span> <span class="n">random</span> <span class="n">number</span> <span class="kn">from</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mf">4.</span><span class="o">..</span><span class="n">i</span>
       <span class="k">if</span><span class="p">(</span><span class="n">j</span><span class="o">&lt;=</span><span class="n">k</span><span class="p">):</span>
           <span class="n">replace</span> <span class="n">jth</span> <span class="n">memory</span> <span class="n">cell</span> <span class="k">with</span> <span class="n">ith</span> <span class="n">element</span>
</pre></div>
</div>
<p>Now let us suppose the ith item is the occured in the chosen subset.</p>
<div class="math notranslate nohighlight">
\[pr[a_i \in S] = \frac ki \times(1-\frac1{i+1})\times(1-\frac 1{i+2})\times .......\times(1-\frac 1n)\]</div>
<p>since ith element must be chosen and placed in one of the k cells and (i+1)th, (i+2)th‚Ä¶nth elements should not fall on that location.</p>
<p>Hence,</p>
<div class="math notranslate nohighlight">
\[pr[a_i \in S] = \frac ki \times(\frac{i}{i+1})\times(\frac{i+1}{i+2})\times ....... \times\frac{n-1}n) \]</div>
<div class="math notranslate nohighlight">
\[pr[a_i \in S] = \frac kn \]</div>
<p>Here reservoir is analogus to memeory cell. At at every step i, all items from 1,2,3,..<span class="math notranslate nohighlight">\(i\)</span> will have the same probability <span class="math notranslate nohighlight">\(\frac1i\)</span> being in the reservoir.</p>
</div>
<div class="section" id="hashing">
<h2>Hashing<a class="headerlink" href="#hashing" title="Permalink to this headline">¬∂</a></h2>
<p>Elements come from universe U, but we need to store only only n items where n&lt;<span class="math notranslate nohighlight">\(|\)</span>U<span class="math notranslate nohighlight">\(|\)</span>.</p>
<p>In hash table, we will have an array size m and hash function ‚Äòh‚Äô that maps elements from Universe to the set {0,1,2,..m-1}. We typically use <span class="math notranslate nohighlight">\(m ‚â™ |U|\)</span> and <span class="math notranslate nohighlight">\(m &lt; n\)</span></p>
<ul class="simple">
<li><p>Collisions happen when <span class="math notranslate nohighlight">\(x ‚â† y\)</span>, but <span class="math notranslate nohighlight">\(h (x) = h(y)\)</span></p></li>
</ul>
<p>In theory, we design for worst-case behaviour of data. So, We Need to choose hash function ‚Äúrandomly‚Äù.</p>
<p>Suppose there is a Hash family H = {<span class="math notranslate nohighlight">\(h_1, h_2, ... \)</span>}. When creating a hash table, we choose a random hash function and start analysing the expected query time. However, the algorithm has to carry around the ‚Äúdescription‚Äù of the hash
function, it needs log(<span class="math notranslate nohighlight">\(|H|\)</span>) bits of storage.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><span class="math notranslate nohighlight">\(|H|\)</span> cannot be too big, in particular, it cannot be the set <span class="math notranslate nohighlight">\([m]^U\)</span>, all possible
functions</p>
</div>
</div>
<div class="section" id="hash-family">
<h2>Hash Family<a class="headerlink" href="#hash-family" title="Permalink to this headline">¬∂</a></h2>
<p>We need to define a way to create a hash function that requires only small amount of ‚Äúparameter storage‚Äù. We can also look it as follows: Suppose we have a set of parameters <span class="math notranslate nohighlight">\(a_1\)</span>, <span class="math notranslate nohighlight">\(a_2\)</span>, <span class="math notranslate nohighlight">\(a_3\)</span>, ‚Ä¶. <span class="math notranslate nohighlight">\(a_k\)</span>. Setting these parameters randomly defines the hash function. It is also important to create small hash families H such that choosing from it gives a function with ‚Äúgood behaviour‚Äù. Here are some hash families.</p>
<div class="math notranslate nohighlight">
\[Uniform \ : \ Pr_{h \in H}[h(x) = i] = \frac{1}{m} \ \  \forall x,i\]</div>
<div class="math notranslate nohighlight">
\[Universal \ : \ Pr_{h}[h(x) = h(y)] = \frac{1}{m} \ \  \forall x\neq y \]</div>
<div class="math notranslate nohighlight">
\[Near \ Universal \ : \ Pr_{h}[h(x) = h(y)] \leq \frac{2}{m} \ \  \forall x\neq y \]</div>
</div>
<div class="section" id="chaining">
<h2>Chaining<a class="headerlink" href="#chaining" title="Permalink to this headline">¬∂</a></h2>
<p>When we are trying to insert items based on the hash values, if two items get the same hash values, we say that the two items are colliding. When  collisons happen, we store that elements in that hash value using linked lists.</p>
<div class="figure align-default" id="hash-1">
<img alt="../_images/hash.png" src="../_images/hash.png" />
<p class="caption"><span class="caption-number">Fig. 36 </span><span class="caption-text">Hash table</span><a class="headerlink" href="#hash-1" title="Permalink to this image">¬∂</a></p>
</div>
<p>Suppose l(x) = length of the chain at position h(x).
Expected time to query x = <span class="math notranslate nohighlight">\(O(1 + E_h[l(x)])\)</span>. It is same for insert and delete.</p>
<p>Now let us define</p>
<div class="math notranslate nohighlight">
\[\begin{split} for \ \ x\neq y \ \ C_{xy}=   \left\{
\begin{array}{ll}
      1 &amp; if \ \ h(x) = h(y)\\
      0 &amp; else\\
\end{array} 
\right.  \end{split}\]</div>
<div class="math notranslate nohighlight">
\[E_{h}[l(x)] = E_{h}[\sum_{y}C_{xy}]\]</div>
<p>For universal hashing</p>
<div class="math notranslate nohighlight">
\[E_{h}[l(x)] = E_{h}[\sum_{y}C_{xy}] = \sum_{y}E_{h}[p(x) = p(y)] = \frac nm\]</div>
</div>
<div class="section" id="prime-multiplicative-hashing">
<h2>Prime Multiplicative Hashing<a class="headerlink" href="#prime-multiplicative-hashing" title="Permalink to this headline">¬∂</a></h2>
<p>Prime Multiplicative hashing is used to design small and universal hash family.</p>
<ul class="simple">
<li><p>Fix a prime number p &gt; <span class="math notranslate nohighlight">\(|U|\)</span></p></li>
<li><p>H = {<span class="math notranslate nohighlight">\(h_a\)</span> (x) = ((ax + b)mod p)mod m, a, b ‚àà {1, ‚Ä¶ p ‚àí 1 }}</p></li>
<li><p>Choosing a hash function is same as choosing a, b ‚àà {1, ‚Ä¶ p ‚àí 1}.</p></li>
</ul>
<footer>
    Author(s): Shivasankaran V P, Gunuru Manoj Taraka Ramarao, Jayasurya Nalamolu 
</footer> </div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "cs328-2022/CS328-Notes",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="2022_03_24_Low_rank_approximation_Mixture_Models%20_and_Recommendation%20systems.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Low rank approximation in Mixture Models and Recommendation systems</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="2022_04_10_DistinctCount_BloomFilters.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Bloom Filters</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Students of CS328 2022<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>